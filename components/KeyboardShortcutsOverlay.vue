<template>
  <FullscreenOverlay :isOpen="isOpen" @close="$emit('close')">
    <div class="shortcuts-overlay">
      <h2 class="shortcuts-title">Ph√≠m T·∫Øt</h2>
      
      <div class="shortcuts-sections">
        <!-- General shortcuts -->
        <div class="shortcut-section">
          <h3 class="section-title">Chung</h3>
          <div class="shortcut-list">
            <div v-for="shortcut in generalShortcuts" :key="shortcut.keys" class="shortcut-item">
              <div class="shortcut-keys">
                <kbd v-for="(key, index) in shortcut.keys.split('+')" :key="index" class="key">
                  {{ key }}
                </kbd>
              </div>
              <div class="shortcut-description">{{ shortcut.description }}</div>
            </div>
          </div>
        </div>

        <!-- Navigation shortcuts -->
        <div class="shortcut-section">
          <h3 class="section-title">Di Chuy·ªÉn</h3>
          <div class="shortcut-list">
            <div v-for="shortcut in navigationShortcuts" :key="shortcut.keys" class="shortcut-item">
              <div class="shortcut-keys">
                <kbd v-for="(key, index) in shortcut.keys.split('+')" :key="index" class="key">
                  {{ key }}
                </kbd>
              </div>
              <div class="shortcut-description">{{ shortcut.description }}</div>
            </div>
          </div>
        </div>

        <!-- Combat shortcuts -->
        <div class="shortcut-section">
          <h3 class="section-title">Chi·∫øn ƒê·∫•u</h3>
          <div class="shortcut-list">
            <div v-for="shortcut in combatShortcuts" :key="shortcut.keys" class="shortcut-item">
              <div class="shortcut-keys">
                <kbd v-for="(key, index) in shortcut.keys.split('+')" :key="index" class="key">
                  {{ key }}
                </kbd>
              </div>
              <div class="shortcut-description">{{ shortcut.description }}</div>
            </div>
          </div>
        </div>

        <!-- Interface shortcuts -->
        <div class="shortcut-section">
          <h3 class="section-title">Giao Di·ªán</h3>
          <div class="shortcut-list">
            <div v-for="shortcut in interfaceShortcuts" :key="shortcut.keys" class="shortcut-item">
              <div class="shortcut-keys">
                <kbd v-for="(key, index) in shortcut.keys.split('+')" :key="index" class="key">
                  {{ key }}
                </kbd>
              </div>
              <div class="shortcut-description">{{ shortcut.description }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="shortcuts-footer">
        <p class="footer-note">üí° M·∫πo: B·∫°n c√≥ th·ªÉ t·∫°o alias t√πy ch·ªânh trong ph·∫ßn C√†i ƒê·∫∑t</p>
      </div>
    </div>
  </FullscreenOverlay>
</template>

<script setup lang="ts">
import FullscreenOverlay from './FullscreenOverlay.vue';

interface Props {
  isOpen: boolean;
}

defineProps<Props>();
defineEmits<{
  (e: 'close'): void;
}>();

const generalShortcuts = [
  { keys: 'F1', description: 'M·ªü tr·ª£ gi√∫p' },
  { keys: 'Ctrl+H', description: 'M·ªü tr·ª£ gi√∫p (Mac: Cmd+H)' },
  { keys: 'ESC', description: 'ƒê√≥ng overlay/popup' },
  { keys: '‚Üë', description: 'L·ªánh tr∆∞·ªõc trong l·ªãch s·ª≠' },
  { keys: '‚Üì', description: 'L·ªánh sau trong l·ªãch s·ª≠' },
  { keys: 'Tab', description: 'T·ª± ƒë·ªông ho√†n th√†nh t√™n' },
  { keys: 'Enter', description: 'G·ª≠i l·ªánh' },
  { keys: 'Ctrl+K', description: 'M·ªü ph√≠m t·∫Øt (overlay n√†y)' },
];

const navigationShortcuts = [
  { keys: 'n', description: 'Di chuy·ªÉn v·ªÅ ph√≠a B·∫Øc' },
  { keys: 's', description: 'Di chuy·ªÉn v·ªÅ ph√≠a Nam' },
  { keys: 'e', description: 'Di chuy·ªÉn v·ªÅ ph√≠a ƒê√¥ng' },
  { keys: 'w', description: 'Di chuy·ªÉn v·ªÅ ph√≠a T√¢y' },
  { keys: 'u', description: 'Di chuy·ªÉn l√™n tr√™n' },
  { keys: 'd', description: 'Di chuy·ªÉn xu·ªëng d∆∞·ªõi' },
];

const combatShortcuts = [
  { keys: 'a', description: 'T·∫•n c√¥ng (attack)' },
  { keys: 'flee', description: 'Ch·∫°y tr·ªën kh·ªèi chi·∫øn ƒë·∫•u' },
  { keys: 'auto', description: 'B·∫≠t/t·∫Øt t·ª± ƒë·ªông chi·∫øn ƒë·∫•u' },
];

const interfaceShortcuts = [
  { keys: 'i', description: 'M·ªü t√∫i ƒë·ªì (inventory)' },
  { keys: 'l', description: 'Xem x√©t (look)' },
  { keys: 'help', description: 'Hi·ªÉn th·ªã tr·ª£ gi√∫p chi ti·∫øt' },
];
</script>

<style scoped>
.shortcuts-overlay {
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem;
  color: var(--text-bright);
  font-family: 'VT323', 'Source Code Pro', monospace;
}

.shortcuts-title {
  font-size: 32px;
  color: var(--text-accent);
  text-align: center;
  margin-bottom: 2rem;
  border-bottom: 2px solid var(--text-bright);
  padding-bottom: 0.5rem;
}

.shortcuts-sections {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 2rem;
  margin-bottom: 2rem;
}

.shortcut-section {
  background-color: rgba(0, 136, 0, 0.1);
  border: 1px solid rgba(0, 255, 0, 0.3);
  border-radius: 4px;
  padding: 1.5rem;
}

.section-title {
  font-size: 24px;
  color: var(--text-accent);
  margin-bottom: 1rem;
  border-bottom: 1px solid rgba(0, 255, 0, 0.3);
  padding-bottom: 0.5rem;
}

.shortcut-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.shortcut-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding: 0.5rem;
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 3px;
  transition: background-color 0.2s;
}

.shortcut-item:hover {
  background-color: rgba(0, 136, 0, 0.2);
}

.shortcut-keys {
  display: flex;
  gap: 0.25rem;
  flex-shrink: 0;
}

.key {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  background-color: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--text-bright);
  border-radius: 3px;
  font-family: 'VT323', 'Source Code Pro', monospace;
  font-size: 16px;
  color: var(--text-bright);
  min-width: 2rem;
  text-align: center;
  box-shadow: 0 2px 0 rgba(0, 255, 0, 0.3);
}

.shortcut-description {
  flex: 1;
  font-size: 16px;
  color: var(--text-dim);
  text-align: right;
}

.shortcuts-footer {
  text-align: center;
  padding-top: 1.5rem;
  border-top: 1px solid rgba(0, 255, 0, 0.3);
}

.footer-note {
  font-size: 18px;
  color: var(--text-accent);
  margin: 0;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .shortcuts-overlay {
    padding: 1rem;
  }

  .shortcuts-title {
    font-size: 24px;
    margin-bottom: 1.5rem;
  }

  .shortcuts-sections {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .shortcut-section {
    padding: 1rem;
  }

  .section-title {
    font-size: 20px;
  }

  .shortcut-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }

  .shortcut-description {
    text-align: left;
  }

  .key {
    font-size: 14px;
    padding: 0.2rem 0.4rem;
  }
}

@media (max-width: 480px) {
  .shortcuts-sections {
    grid-template-columns: 1fr;
  }

  .shortcuts-title {
    font-size: 20px;
  }

  .section-title {
    font-size: 18px;
  }

  .shortcut-description {
    font-size: 14px;
  }
}
</style>
